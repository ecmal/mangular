{
  "version": 3,
  "file": "annotate.js",
  "sourceRoot": "/Users/Sergey/Work/BB/wcb-project/mangular/src",
  "sources": [
    "annotate.ts"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "import angular from \"./angular/angular\";\nimport {Decorator} from \"runtime/decorators\";\nimport {Member, Class, Constructor, Property,Interface} from \"runtime/reflect/class\";\n\nconst MANGULAR = Symbol('mangular');\n\nexport class Inject extends Decorator{\n    private static map = {\n        'mangular/interfaces#Scope':'$scope',\n        'mangular/interfaces#Logger':'$log'\n    };\n    protected name:string;\n    constructor(name?:string){\n        super();\n        this.name = name;\n    }\n    decorate(member:Member){\n\n        member.owner.metadata.mangular = true;\n        var type = member.type.reference;\n        if(this.name){\n            member.metadata.injected = this.name;\n        }else{\n            if(Inject.map[type.id]){\n                member.metadata.injected = Inject.map[type.id];\n            }else{\n                member.metadata.injected = type.name;\n            }\n        }\n\n    }\n}\nexport class Controller extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        console.info(`target for ${this.constructor.name} in ${member.toString()}`);\n        if(member instanceof Constructor){\n            member.owner.metadata.mangular = true;\n            member.owner.metadata.isController = true;\n        }else{\n            throw new Error(`invalid target for ${this.constructor.name} in ${member.toString()}`)\n        }\n    }\n}\nexport class Service extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        console.info(`target for ${this.constructor.name} in ${member.toString()}`);\n        if(member instanceof Constructor){\n            member.owner.metadata.mangular = true;\n            member.owner.metadata.isService = true;\n        }else{\n            throw new Error(`invalid target for ${this.constructor.name} in ${member.toString()}`)\n        }\n    }\n}\nexport class Config extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isConfig = true;\n    }\n}\nexport class Run extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isRun = true;\n    }\n}\nexport class Provider extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isProvider = true;\n    }\n}\nexport class Directive extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isDirective = true;\n    }\n}\nexport class Component extends Decorator{\n    private options:any;\n    constructor(options?){\n        super();\n        this.options = options;\n    }\n    decorate(member:Member){\n        console.info(`target for ${this.constructor.name} in ${member.toString()}`);\n        if(member instanceof Constructor){\n            member.owner.metadata.mangular = true;\n            member.owner.metadata.isComponent = true;\n            member.owner.metadata.options = this.options;\n        }else{\n            throw new Error(`invalid target for ${this.constructor.name} in ${member.toString()}`)\n        }\n    }\n}\nexport class Filter extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isFilter = true;\n    }\n}\nexport class Value extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isValue = true;\n    }\n}\nexport class Const extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isConst = true;\n    }\n}\nexport class Factory extends Decorator{\n    constructor(...args){super()}\n    decorate(member:Member){\n        member.owner.metadata.mangular = true;\n        member.metadata.isFactory = true;\n    }\n}\n\nexport class Mangular {\n    static modules:{[k:string]:Module};\n    public static start(module) {\n        this.modules = Object.create(null);\n        var mClasses = Object.keys(system.classes)\n            .filter(k=>system.classes[k].metadata.mangular)\n            .map(k=>{\n                var cls = system.classes[k];\n                var mod = cls.module;\n                Mangular.modules[mod.name]=mod;\n                return cls;\n            });\n        Object.keys(Mangular.modules).forEach(c=>{\n            var m = Mangular.modules[c];\n            if(!m[MANGULAR]){\n                m[MANGULAR]=angular.module(m.name,m.requires.filter(n=>!!this.modules[n]));\n            }\n        });\n        mClasses.forEach(c=>{\n            if(c.metadata.isController){\n                this.initController(c);\n            }\n            if(c.metadata.isService){\n                this.initService(c);\n            }\n            if(c.metadata.isComponent){\n                this.initComponent(c);\n            }\n        })\n    }\n\n    private static getClassFunction(cls:Class):Function {\n        var members = Object.keys(cls.members).map(k=>cls.members[k]);\n        var construct:Constructor = members.find(f=>\n            (f instanceof Constructor)\n        );\n        var fields:Property[] = members.filter(f=>\n            (f.metadata.injected && (f instanceof Property) && !f.isStatic)\n        );\n        var instanceParamTypes = fields.map((f:Property)=> {\n            return f.metadata.injected;\n        });\n        var instanceParamNames = fields.map((f:Property)=> {\n            return f.name;\n        });\n\n        var constructParams = [];/* construct..map((p:Param)=> {\n            return p.getMetadata(\"angular:inject\") || (p.type == Object ? p.name : p.type.name);\n        });*/\n        var closure:Function = (...args)=> {\n            var instance = Object.create(cls.value.prototype);\n            for (var i = 0; i < instanceParamNames.length; i++) {\n                instance[instanceParamNames[i]] = args.shift();\n            }\n            cls.value.apply(instance, args);\n            /*if (modifier) {\n                instance = modifier(instance) || instance;\n            }*/\n            return instance;\n        };\n        closure['$inject'] = instanceParamTypes.concat(constructParams);\n        return closure;\n    }\n    private static initController(m:Class){\n        m.module[MANGULAR].controller(m.name,this.getClassFunction(m));\n    }\n    private static initService(m:Class){\n        m.module[MANGULAR].service(m.name,this.getClassFunction(m));\n    }\n    private static initComponent(m:Class){\n        var options = Object.create(null);\n        if(m.metadata.options){\n            for(var key in m.metadata.options){\n                options[key]= m.metadata.options[key];\n            }\n        }\n        options.name = options.name || m.name;\n        options.controller = this.getClassFunction(m);\n        options.name = options.name[0].toLowerCase()+options.name.substring(1);\n        m.module[MANGULAR].component(options.name,options);\n    }\n}\n\nexport default Mangular;"
  ]
}